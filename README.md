# README


##已经实现的部分
> * PackTcpSegment：
    * 封装
        × 接收应用层数据，设定头部相关参数（包括20字节的标准头部和option字段），加上伪首部生成校验和。
        × 输出已经封装的TCP报文以及报文的长度
    * 解封
        × 接收IP解析出的TCP报文，并从中提取出数据字段以及头部相关信息
        × 递交数据部分信息
> * PackUdpSegment：
    × 与TCP部分相同
> * PackIpSegment：
    * 封装
        × 获取TCP或者UDP报文填充数据字段，设定头部参数
        × 输出IP分组以及分组的长度
    * 解封
        × 获取MAC层解析出的IP分组数据，从中解析出头部信息和传输层报文
> * EthernetFrame
    * 略
        
##存在的问题
> 工作流程为在main.cc文件中指定传输层协议以及协议参数和数据部分，经过TCP或者UDP封装后得到相关报文，再把报文交给IP处理，封装后得到IP分组，最后由EthernetFrame封装成以太帧并写入文件。
最后读取这个文件层层解析出应用层的数据。

> * **当EthernetFrame完成以太帧后写入文件时会出现不明错误**

##问题原因
> 生成以太帧后写入时会获取帧长度信息，但是由于之前做过字节序的转换，所以直接返回长度字段的信息会偏大。导致写入时内存非法访问

##解决方案
> 对长度字段进行ntohs()处理。




